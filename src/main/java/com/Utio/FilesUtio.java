package com.Utio;

import com.Form.Father;
import com.Service.Main01Filter;

import javax.servlet.http.Part;
import java.io.File;

public class FilesUtio {
    public static String sc_Path(Father father, Main01Filter main, String filePath) { //???????????  ????????????  ?????????main?????????????·??  ???????????·??
        String pathName=null; //???????·??
        String srelativePath=null;//?????????·??
        try{

            for (Part part : father.getParts()) {
                //????????????·??
                String path1 = main.getServletContext().getRealPath("/");//?????????·??
//                String filePath= "file\\image\\" +name+"\\headPortrait"+"\\";  // ???????·??
//                String filePath=path;  // ???????·??
                path1+=filePath; //????·??+????·?? ?????·??
                //???????????????
                if (part.getName().startsWith("file")) {
                    String header = part.getHeader("Content-Disposition"); //??????
                    String fileName = header.substring(header.indexOf("filename=\"") + 10, header.lastIndexOf("\"")); //???????·??
                    System.out.println("FileName:"+fileName); //???·??

                    File f = new File(path1);//???????
                    if (!f.exists()) {
                        f.mkdirs();
                    }
                    pathName = path1 + fileName;  //???????·??
                    srelativePath = filePath + fileName;//?????????·??

//                    infoModel.setHeadimg(srelativePath); //???浽??????·??
                    part.write(pathName);  //?????????????·??

                    System.out.println("\n---------path->->----------\n"+"pathName:"+pathName+"\n"+"srelativePath:"+srelativePath+"\n---------path->->----------\n"); //????????????·??

                }


            }

        }catch (Exception e){
            System.out.println("文件保存失败");
            e.printStackTrace();
            return null;
        }
        return srelativePath;
    }
}
