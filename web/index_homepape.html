<!--文章首页论坛-->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"  />
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="renderer" content="webkit" />
    <title>blog_index</title>
    <meta name="keywords" content="张三的博客">
    <meta name="description" content="张三的博客">
    <link href="css/base.css" rel="stylesheet" type="text/css">
    <script src="js/jquery-1.8.3.min.js" type="text/javascript"></script>
    <script src="js/base.js" type="text/javascript"></script>
    <script src="js/jquery.slides.min.js" type="text/javascript"></script>

</head>
<script>

  function  hidden1(){

      let hidden1 = document.getElementById("hidden1").value;
      console.log(hidden1); //输出调试

      //跳转
     location.href='article.do?id='+hidden1;

  }

</script>
<body>


<div id="page1" >
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script>
        $("#page1").load("headline.html");  //拷贝头
    </script>
</div>
<div th:replace="headline :: myfooter"></div> <!--引入首页头-->

<!--<div class="nav_hidden_zhanwei"></div>-->

<!--<div class="search_box">-->
<!--    <div class="search">-->

<!--        <form name="searchform" class="search_form" method="post" action="index.html" target="_blank">-->
<!--            <input type="text" class="search_text" name="keyboard" placeholder="输入关键字点击搜索" id="keyboard">-->
<!--            <input type="hidden" name="tbname" value="news">-->
<!--            <input type="hidden" name="show" value="title,smalltext">-->
<!--            <input type="hidden" name="tempid" value="1">-->
<!--            <input type="hidden" name="classid" value="1,4,9">-->
<!--            <input type="button" class="search_btn" value="搜索一下" id="update1">-->
<!--        </form>-->

<!--    </div>-->
<!--</div>-->



<div class="banner_box">

</div>

<div class="article_box clearfix">
    <div class="left">
<!--        &lt;!&ndash;首页最新模板部分&ndash;&gt;-->
        <div class="article_box_one" id="articleBox" >

        </div>

<!--        &lt;!&ndash;首页博文推荐部分&ndash;&gt;-->
<!--        <div class="article_box_one">-->
<!--            <div class="index_article_title clearfix">-->
<!--                <h3>推荐博文</h3>-->
<!--                <a href="list.html">更多></a>-->
<!--            </div>-->

<!--        </div>-->


        <div>
            <input type="button"  class="more" id="loadmore" value="点击加载更多" onclick="alert('当前暂时没有更多文章')">
        </div>

    </div>

</div>



<div class="footer_box">
    <div class="footer clearfix">
        <div class="footer_img">
            <ul>
                <li>
                    <img src="img/self_qq_bottom_erweima.png">
                    <span>我的qq</span>
                </li>
                <li>
                    <img src="img/self_weixin_bottom_erweima.jpg">
                    <span>我的微信</span>
                </li>
            </ul>
        </div>
        <div class="footer_text">
<!--            <p th:each="models:${models}" th:text="${models.id}"></p>-->
            <p><i>站点声明：</i></p>
            <a  href="http://wpa.qq.com/msgrd?v=3&uin=911412667&site=qq&menu=yes"><font color="red">1.点此访问站长:911412667</font></a>
            <p>2.不要搞各种html注入</p>
        </div>
    </div>

</div>
</body>
<script>

</script>


<script th:inline="javascript" type="text/javascript">




    $(document).ready(function(){

        function update1(){  //进行数据的更新和初始化
            let ac=[[${session.str}]];
            // alert("输出的值"+ac);
            //开始的时候清除div
            let articleBox = document.getElementById("articleBox");
            let div1 = document.getElementById("classC3");
            // alert(articleBox+"    "+div1)
            if(div1!=null){
                articleBox.removeChild(div1);
            }


            //创建div
             let div2=document.createElement("div1"); //创建一个表  创建一个tbody
             div2.setAttribute("class","classC3"); //绑定他的class
             div2.setAttribute("id","classC3"); //绑定他的id

            articleBox.appendChild(div2); //保存文件




            //更新服务器传输过来的消息 进行第一次判断是否为空
            let hidden1 = document.getElementById("keyboard").value;
            if(hidden1!=""){
            //     $.ajax({
            //         type:"post",
            //         url:"Index_homepape_fuzzyQueryAction.do",
            //         data:{"name":hidden1},
            //         dataType:"json",        //指定响应的data数据类型为JSON对象。
            //         xhrFields:{
            //             withCredentials:true
            //         },
            //         crossDomain: true,
            //
            //
            //         success:function(result){
            //             alert("test");
            //         },
            //
            //
            //     });
            //
            //     let ac=[[${session.str}]];
                // alert("输出的值"+ac);


                // alert("执行查询"); //输出调试
                location.href="Index_homepape_fuzzyQueryAction.do?name="+hidden1;
            }


            //获取所有的消息
                let info=
                    [
                        [# th:each="models : ${models}"]
                            {
                                theme:[[${models.theme}]],
                                    id:[[${models.id}]],
                                content:[[${models.content}]],
                                postdate:[[${models.postdate}]],
                                uname:[[${models.uname}]],

                            },
                        [/]
                    ]


            for(let i=0;i<info.length;i++){
                console.log(info[i].id);



                let appendAdd="   <!--首页最新模板部分2222-->\n" +

                    "            <div class=\"index_article_title clearfix\">\n" +
                    "                <h3>文章标题:"+info[i].theme+"</h3>\n" +
                    "                <p href=\"list.html\" >更多></p>\n" +
                    "            </div>\n" +
                    "            <ul class=\"index_article\" >\n" +
                    "\n" +
                    "                <input type=\"hidden\" name=\"idtext\" id=\"hidden1\" value=\""+info[i].id+"\">\n" +
                    "                <li class=\"clearfix article_list\">\n" +
                    "\n" +
                    "                    <a href=\"article.do?id="+info[i].id+"\" class=\"article_list_img\">\n" +
                    "                        <img src=\"img/bg_5.png\" >\n" +
                    "                    </a>\n" +
                    "\n" +
                    "                    <h3  href=\"\"  >文章标题:"+info[i].theme+"</h3>\n" +
                    "                    <p  text=\"\">文章内容:"+info[i].content+"</p>\n" +
                    "\n" +
                    "                    <div class=\"article_list_link\">\n" +
                    "                        <span class=\"article_list_count\">\n" +
                    "                            <i class=\"see_count\"></i>\n" +
                    "                            <p>发布时间:</p><p >"+info[i].postdate+"</p>\n" +
                    "                        </span>\n" +
                    "                        <span class=\"article_list_like\">\n" +
                    "                            <i class=\"like_count\"></i>\n" +
                    "                           <p> 发布人:</p><p>"+info[i].uname+"</p>\n" +
                    "                        </span>\n" +
                    "                        <a href=\"article.do?id="+info[i].id+"\">查看详细+</a>\n" +
                    "                    </div>\n" +
                    "                </li>\n" +
                    "            </ul>\n" +
                    "\n";
                $('.classC3').append(appendAdd);//
            }
        }

        // let id = document.getElementById("update1");
        // id.onclick=update1; //绑定表单


      update1(); //第一次执行初始化操作




    });


</script>
</html>

<!--异步获取文章-->


<!--        <div class="right">-->
<!--        &lt;!&ndash;个人介绍部分&ndash;&gt;-->
<!--            <div class="self_info right_box">-->
<!--                <img src="img/self.jpg">-->
<!--                <div class="self_info_text">-->
<!--                    <h3 text="${session.userBAsic.nickName}">张4</h3>-->
<!--                    <div>-->


<!--                        <p>天将降大任于斯人也，必先苦其心志、磨其胫骨、饿其体肤</p>-->
<!--                    </div>-->
<!--                    <a href="#">关注(当前并没有做)</a>-->
<!--                </div>-->
<!--            </div>-->
<!--            &lt;!&ndash;个人介绍隐藏部分，只在右侧被翻到最上面显示&ndash;&gt;-->
<!--            <div class="self_info_scroll_bottom right_box">-->
<!--                <img src="img/self.jpg">-->
<!--                <div class="self_info_text">-->
<!--                    <h3>大青牛爱穿山甲</h3>-->
<!--                    <div>-->
<!--                        <p>以彼之长，增长自身</p>-->

<!--                    </div>-->
<!--                    <a href="#">Read More</a>-->
<!--                </div>-->
<!--            </div>-->
<!--&lt;!&ndash;微信二维码部分&ndash;&gt;-->
<!--            <div class="self_erweima right_box">-->
<!--                <h3>微信二维码</h3>-->
<!--                <div>-->
<!--                    <img src="img/self_weixin_erweima.png">-->
<!--                </div>-->
<!--            </div>-->

<!--&lt;!&ndash;qq二维码部分&ndash;&gt;-->
<!--            <div class="self_erweima right_box">-->
<!--                <h3>QQ二维码</h3>-->
<!--                <div>-->
<!--                    <img src="img/self_qq_erweima.png">-->
<!--                </div>-->
<!--            </div>-->

<!--&lt;!&ndash;座右铭目的把div对齐最多只能2行字，多了就高了&ndash;&gt;-->
<!--            <div class="self_zuoyoum right_box">-->
<!--                <h3>这里或许能做些什么东西</h3>-->

<!--            </div>-->

<!--&lt;!&ndash;模板推荐&ndash;&gt;-->
<!--            <div class="right_box tuijian_moban">-->
<!--                <h3>最近的说说</h3>-->
<!--                <div>-->
<!--                    <ul>-->
<!--                        <li><a href="#">这个是标题</a></li>-->
<!--                        <li><a href="#">这个是标题1</a></li>-->
<!--                        <li><a href="#">这个是标题2</a></li>-->
<!--                    </ul>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->